{% extends "blog/base.html" %} {% block content %}

<style>
  .author-avatar {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    object-fit: cover;
  }

  .post-card {
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .post-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 22px 45px rgba(0, 0, 0, 0.08);
  }

  .post-title a {
    color: #111827;
    text-decoration: none;
  }

  .post-title a:hover {
    color: #2563eb;
  }

  .post-meta a {
    text-decoration: none;
    color: #111827;
  }

  .post-meta a:hover {
    color: #2563eb;
  }

  .post-content {
    color: #4b5563;
    line-height: 1.7;
    font-size: 0.95rem;
  }

  .pagination .page-link {
    border-radius: 10px;
    margin: 0 4px;
  }
</style>

<div class="row">
  <div class="col-lg-8 col-md-10 mx-auto">
    <header class="text-center mb-5">
      <h2 class="fw-bold mb-1">Posts by {{ view.kwargs.username }}</h2>
      <p class="text-muted">{{ page_obj.paginator.count }} total posts</p>
    </header>

    {% for post in posts %}
    <article class="card post-card mb-4 border-0 rounded-4 shadow-sm">
      <div class="card-body p-4 p-md-5">
        <div class="d-flex align-items-center mb-4 post-meta">
          <img
            src="{{ post.author.profile.image.url }}"
            class="author-avatar me-3"
            alt="author avatar"
          />
          <div>
            <a
              class="fw-semibold"
              href="{% url 'user-post' post.author.username %}"
            >
              {{ post.author }}
            </a>
            <div class="text-muted small">
              {{ post.date_posted|date:"F d, Y" }}
            </div>
          </div>
        </div>

        <h3 class="post-title fw-bold mb-3">
          <a href="{% url 'post-detail' post.id %}"> {{ post.title }} </a>
        </h3>

        <p class="post-content mb-0">{{ post.content|truncatechars:220 }}</p>
      </div>
    </article>
    {% empty %}
    <p class="text-center text-muted mt-5">No posts available.</p>
    {% endfor %} {% if is_paginated %}
    <nav class="mt-5">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1">First</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
            Prev
          </a>
        </li>
        {% endif %} {% for num in page_obj.paginator.page_range %} {% if page_obj.number == num %}
        <li class="page-item active">
          <span class="page-link">{{ num }}</span>
        </li>
        {% elif num > page_obj.number|add:"-3" and num < page_obj.number|add:"3" %}
        <li class="page-item">
          <a class="page-link" href="?page={{ num }}">{{ num }}</a>
        </li>
        {% endif %} {% endfor %} {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">
            Next
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">
            Last
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>
    {% endif %}
  </div>
</div>

{% endblock %}
